# Part 2. 실무에 AI Coding 적용하기

## AI Coding을 위한 보안 가이드

AI를 활용한 개발은 이제 선택이 아니라 필수가 되었습니다.  
하지만 **AI 주도로 개발을 시작하는 순간** , 보안은 더 이상 부가 요소가 아닙니다.

특히 이 강의에서 다루는 방식처럼  
AI에게 **일을 맡기는 위임(Delegation)** 단계로 넘어가면  
보안은 “신경 쓰면 좋은 것”이 아니라 **반드시 설계해야 하는 전제조건** 이 됩니다.

---

### AI활용에서의 보안 문제

#### AI를 바라보는 관점의 변화: 협업 → 위임

AI 활용 방식은 크게 두 단계로 나뉩니다.

- **협업(Collaboration)**  
  - “AWS에 CI/CD 구축하는 방법 알려줄래?”
  - 사람이 판단의 주체

- **위임(Delegation)**  
  - “구글·네이버 로그인 기능 구현해줘”
  - AI가 실행의 주체

👉 문제는,  
**위임에는 반드시 ‘신뢰’라는 전제조건이 따른다** 는 점입니다.

---

#### AI는 유능하지만, 완전하지 않다

AI의 가장 중요한 특징은 다음 한 줄로 요약할 수 있습니다.

> **AI는 기억력(Context)에 제한이 있는 신입사원이다**

- 무엇이 중요한지 모르면 전부 읽으려 한다
- 접근하면 안 되는 정보도 구분하지 못한다
- 보안 규칙을 “알아서” 지키지 않는다

따라서 보안 사고의 상당수는  
**AI의 악의가 아니라, 개발자의 설계 부재** 에서 발생합니다.

---

#### AI 활용 시 발생하는 두 가지 핵심 리스크

##### 1️⃣ Outbound Risk (아웃바운드 리스크) – 정보 유출

AI에게 요청을 보내는 순간,  
우리는 **Context라는 정보 꾸러미** 를 함께 전달하게 됩니다.

- 소스코드
- 설정 파일
- 로그
- 내부 규칙
- 경우에 따라 비밀 키, 환경 변수

실제 사례로,
- 글로벌 기업들이 생성형 AI 사용을 제한하거나
- 사내 코드 업로드를 전면 금지한 이유도

👉 **의도하지 않은 정보 유출** 때문입니다.

---

##### 2️⃣ Inbound Risk (인바운드 리스크) – 취약점 유입

AI가 생성한 코드는 “그럴듯해 보이지만” 항상 안전하지는 않습니다.

연구 결과에 따르면:
- AI가 생성한 코드의 **약 40%에서 잠재적 보안 취약점** 이 발견되었습니다.
- SQL Injection, XSS, 잘못된 암호화 로직 등

예를 들어, 다음과 같은 요청을 했다고 가정해봅시다.

> “사용자 프로필 페이지에 환영 메시지를 표시해줘.  
> 메시지는 URL 파라미터에서 가져와.”

AI가 생성한 코드가 다음과 같다면:

```javascript
messageElement.innerHTML = `환영합니다, ${userName}님!`;
````

이는 **명백한 XSS 취약점** 을 포함합니다.

AI는 기능을 만족했지만,
보안까지 고려하지는 않았습니다.

---

#### AI 보안을 설계하는 핵심 원칙

AI를 안전하게 사용하기 위해서는
“조심해서 써야지”가 아니라 **구조적인 통제** 가 필요합니다.

##### 1️⃣ 최소 권한 원칙

* “이번 작업은 `src/payment` 디렉토리만 접근 가능”
* 읽기 / 쓰기 권한 명확히 분리

##### 2️⃣ 명시적 접근 금지

* `.env`, `secrets/`, `config/` 접근 금지
* 규칙으로 **명문화**

##### 3️⃣ 데이터 마스킹

* 운영 데이터 절대 사용 ❌
* 모든 민감 정보는 가짜 데이터로 대체

> AI가 일할 **환경 자체를 설계** 해야 한다

---

#### Inbound Risk를 제어하는 방법

* 보안 코딩 가이드를 **Context에 명시적으로 주입**

  * “모든 SQL은 파라미터 바인딩 사용”
* 승인된 라이브러리만 사용하도록 제한
* 자동 보안 검증 도입

  * SonarQube, ESLint Security Rule 등

---

#### 신뢰하되, 검증하라

> “Trust, but verify.” – 로널드 레이건

AI를 신뢰하지 말라는 의미가 아닙니다.

* **신뢰는 설계로 만든다**
* **검증은 자동화로 강제한다**

이 두 가지가 함께 가야
AI Coding은 실무에서 안전해집니다.

---

### AI도구별 보안정책에 대해

AI 도구마다 **보안 철학과 구현 방식은 다릅니다.**
실무에서는 반드시 이 차이를 이해해야 합니다.

---

#### 회사에서 AI 코딩 도구를 활용하는 세 가지 방식

1. **상용 AI 서비스 사용**

   * Privacy Mode 활성화
   * Zero Data Retention 확인

2. **내부 보안 환경에서 사용**

   * 오픈소스 LLM 활용
   * 자체 API 연동

3. **외부 개발 + 내부 머지 전략**

   * 외부에서 AI 활용
   * 내부 저장소에는 검증된 코드만 반영

---

#### Cursor의 보안정책 톺아보기

Cursor는 기업 환경을 고려한 보안 기능을 제공합니다.

##### 핵심 포인트

* SOC 2 Type 1 / Type 2 인증
* 인프라·조직·제품·데이터 보안 관리

##### Privacy Mode

* 코드 학습 미사용
* 데이터 저장 안 함
* OpenAI / Anthropic Zero Data Retention

👉 **실무에서는 반드시 Privacy Mode 활성화** 가 기본입니다.

---

##### Cursor의 데이터 흐름 이해하기

* AI 요청 시:

  * 선택된 파일
  * 대화 기록
  * 언어 분석 정보

이 정보가 **AWS 인프라를 통해 전송** 됩니다.

따라서:

* 어떤 파일을 Context로 넘길지
* 무엇을 Select / Isolate 할지

를 개발자가 통제해야 합니다.

---

#### Claude Code의 보안정책 톺아보기

Claude Code는 **권한 기반 설계** 가 매우 강력한 Agent 도구입니다.

##### 권한 설정 예시

```json
{
  "permissions": {
    "allow": ["Bash(npm run test:*)"],
    "deny": ["Bash(curl:*)"]
  }
}
```

* 허용된 작업만 실행
* 위험한 명령은 원천 차단

##### 보안 관점에서의 장점

* 계층별 권한 정책
* Devcontainer 지원
* 프롬프트 인젝션 방어
* MCP 권한 관리

---

#### Agent 시대의 새로운 보안 질문

* AI에게 **어디까지 권한을 줄 것인가?**
* 인간과 **동등한 보안 등급** 을 적용해야 하는가?
* MCP(Server)는 어떻게 통제할 것인가?

이 질문에 답하지 않으면,
Agent는 **가장 위험한 내부 사용자** 가 될 수 있습니다.

---

### 정리

* AI Coding의 보안 리스크는 Outbound / Inbound로 나뉜다
* 위임 단계에서는 보안 설계가 필수다
* 도구별 보안 정책을 반드시 이해해야 한다
* AI에게도 인간과 동일한 보안 기준이 필요하다


## AI 주도로 개발하기 – Cursor

이제부터는 본격적으로  
**AI가 개발을 ‘보조’하는 단계를 넘어, ‘주도’하는 환경** 을 만들어봅니다.

그 중심에 있는 도구가 바로 **Cursor** 입니다.

Cursor는 단순히 “AI가 붙은 VS Code”가 아닙니다.  
이 도구의 핵심 가치는 **개발자의 사고방식과 AI의 실행력을 연결하는 구조** 에 있습니다.

---

### Cursor란 무엇인가

#### Cursor의 정체성

Cursor는 VS Code 기반의 **AI Coding IDE** 로,  
다음 질문에 가장 명확한 답을 제공하는 도구입니다.

> “AI에게 코드를 맡기려면, 어떤 환경이 필요할까?”

Cursor는 이를 위해 다음을 제공합니다.

- 전체 코드베이스를 이해하는 **Agent**
- 반복 규칙을 구조화하는 **Rules**
- 외부 도구·데이터를 연결하는 **MCP**
- 개발자가 Context 흐름을 **시각적으로 인지** 할 수 있는 IDE

---

#### 왜 Cursor인가?

Cursor가 주목받는 이유는 단순한 성능 때문이 아닙니다.

- **시각적 인지**
  - Agent가 어떤 파일을 읽고
  - 어떤 Context를 참고하며
  - 어떤 결론을 내렸는지 확인 가능

- **Context Engineering에 최적화**
  - Select / Isolate / Write / Compress 전략을
  - IDE 안에서 직접 훈련 가능

- **Agent 중심 설계**
  - Tab → Inline Edit → Agent
  - 협업에서 위임으로 자연스럽게 전환

Cursor는 이 강의 전반에서  
**“나만의 AI 개발자”를 만드는 실험실** 역할을 합니다.

---

### Cursor 설치 및 기초 사용법

#### 1️⃣ Cursor 설치

- Cursor 공식 사이트에서 다운로드
- Windows / macOS / Linux 지원
- VS Code 사용 경험이 있다면 별도 학습 비용 없음

설치 후 로그인:
- Email
- Google / GitHub / Apple 계정 연동 가능

---

#### 2️⃣ 기본 설정에서 반드시 확인할 항목

##### Privacy Mode

실무 환경에서는 **Privacy Mode 활성화가 기본 전제** 입니다.

- 코드 학습 ❌
- 데이터 저장 ❌
- Zero Data Retention 활성화

> AI에게 일을 맡기기 전에  
> **데이터를 어떻게 다루는지부터 확인해야 합니다.**

---

##### Model 설정

Cursor는 다양한 모델을 지원합니다.

- 빠른 반복 작업 → 경량 모델
- 설계·리팩토링 → 고성능 모델

👉 중요한 것은 “항상 최고 성능 모델”이 아니라  
**상황에 맞는 모델 선택** 입니다.  
(이 부분은 Part3의 Custom Mode에서 심화 다룹니다)

---

##### Codebase Indexing

Cursor는 코드베이스를 **의미적으로 인덱싱** 합니다.

- 파일 구조
- 함수 간 관계
- 참조 흐름

이 인덱싱 덕분에 Agent는:
- “이 코드가 왜 여기 있는지”
- “어디에 영향이 가는지”

를 추론할 수 있습니다.

---

#### 3️⃣ Cursor의 기본 사용 패턴

- **Tab**
  - 현재 맥락 기반 자동 완성

- **Inline Edit**
  - 특정 코드 블록을 선택해 즉시 수정 요청

- **Agent**
  - 작업 목표를 주고 전체 흐름을 위임

👉 이 강의의 핵심은 **Agent 사용** 입니다.

---

### Rules 설정으로 Cursor를 강화해보자

AI가 항상 같은 실수를 반복한다면,  
그건 AI의 문제가 아니라 **규칙이 없기 때문** 입니다.

#### Rules란 무엇인가?

Rules는 Cursor Agent가 **항상 지켜야 할 반복 지시사항** 입니다.

- 프로젝트 구조
- 코딩 컨벤션
- 보안 규칙
- 필수 라이브러리
- 작업 방식(Workflow)

Rules는 단발성 Prompt가 아니라  
**지속적으로 적용되는 개발 규칙** 입니다.

---

#### User Rules vs Project Rules

- **User Rules**
  - 모든 프로젝트에 공통 적용
  - 개인 개발 철학, 습관

- **Project Rules**
  - 특정 프로젝트 전용
  - 팀 규칙, 기술 스택, 보안 정책

예:
- Frontend 프로젝트 Rules
- Backend 프로젝트 Rules
- 사내 표준 프로젝트 Rules

---

#### Instruction의 구조 이해하기

Cursor에서 AI에게 전달되는 **Instruction** 은 다음의 합입니다.

- System Prompt
- User Rules
- Project Rules
- User Prompt

👉 즉,  
**Rules는 Prompt의 일부가 아니라, Prompt를 지배하는 기준** 입니다.

---

#### 왜 Rules가 중요한가?

Rules가 없는 Agent는:
- 매번 처음 온 외주 개발자처럼 행동하고
- 같은 실수를 반복하며
- 컨벤션을 잊어버립니다

Rules가 있는 Agent는:
- 항상 같은 기준으로 판단하고
- 점점 “우리 팀 개발자”처럼 행동합니다

---

### MCP를 활용해 Cursor를 강화해보자

Rules가 **기준과 사고방식** 이라면,  
MCP는 **Agent의 손과 발** 입니다.

---

#### MCP(Model Context Protocol)란?

MCP는 AI가 외부 도구·데이터와 상호작용할 수 있도록 만든  
**표준 연결 규약** 입니다.

쉽게 말해:

> “AI가 USB처럼 외부 시스템을 꽂아 쓰는 방법”

---

#### MCP Server가 하는 일

##### Context Import (Collect)

- 데이터베이스 조회
- 파일 읽기
- 웹 검색
- 문서 불러오기

##### Result Export (Action)

- Notion 문서 작성
- Jira 상태 변경
- Figma 디자인 생성
- 코드 결과 저장

---

#### Cursor + MCP = 진짜 Agent

MCP를 연결한 Cursor Agent는:

- 코드를 작성하고
- 문서를 읽고
- 결과를 기록하고
- 상태를 업데이트합니다

즉,
> **“코드만 잘 짜는 AI”가 아니라  
> “일을 끝내는 AI”**가 됩니다.

---

#### Local MCP vs Remote MCP

- **Local MCP**
  - 로컬 파일, 내부 시스템 연동
  - 높은 보안성

- **Remote MCP**
  - 외부 서비스 연동
  - OAuth 기반 인증

실무에서는:
- Local MCP로 내부 Context 관리
- Remote MCP로 협업 도구 연동

이 조합이 가장 일반적입니다.

---

### Cursor로 무엇을 할 수 있게 되는가?

이 시점에서 Cursor는 단순 IDE가 아닙니다.

- 나의 개발 규칙을 기억하고
- 내가 일하는 방식을 따르며
- 필요할 때 외부 도구를 사용해
- 결과물을 완성하는

👉 **개인 맞춤형 AI 개발자** 가 됩니다.

---

### 정리

- Cursor는 AI 주도 개발을 위한 IDE다
- Agent 사용이 핵심이다
- Rules는 사고방식을 고정한다
- MCP는 Agent의 실행 범위를 확장한다
- Cursor는 나만의 Coding Agent를 만드는 플랫폼이다


## Cursor를 활용해 웹페이지를 만들어보자

이제 Cursor를 실제 개발에 적용해볼 차례입니다.  
하지만 이 섹션에서는 **곧바로 코드를 작성하지 않습니다.**

AI 주도 개발의 핵심은
> “코드를 잘 짜는 것”이 아니라  
> **“AI가 코드를 잘 짤 수 있는 환경을 먼저 만드는 것”** 이기 때문입니다.

이번 실습의 목표는 단 하나입니다.

> **요구사항을 기반으로  
> Cursor Agent가 제대로 일할 수 있는 환경을 구성한다**

---

### 요구사항을 바탕으로 Cursor 환경 구성하기

#### 실습 시나리오

다음과 같은 요구사항이 주어졌다고 가정해봅시다.

> - 로그인 페이지를 만든다  
> - Google 로그인과 GitHub 로그인을 지원한다  
> - React + TypeScript 기반  
> - 보안 취약점(XSS, CSRF)을 고려해야 한다  

많은 사람들이 이 지점에서 바로 AI에게 이렇게 요청합니다.

> ❌ “로그인 페이지 만들어줘”

그리고 결과가 마음에 들지 않으면  
“AI가 별로네”라고 결론을 내립니다.

하지만 실제 문제는 **AI가 아니라 환경 구성** 입니다.

---

## 1️⃣ 요구사항을 ‘정보 꾸러미(Context)’로 분해하기

AI는 요구사항 문장을 그대로 이해하지 못합니다.  
반드시 **실행 가능한 Context** 로 분해해야 합니다.

### 개발에 필요한 정보 꾸러미

요구사항을 다음과 같이 나눌 수 있습니다.

#### 1. 목표 (Goal)

- 로그인 페이지 구현
- Google / GitHub OAuth 지원

#### 2. 기술 스택 (Tech Stack)

- React 18
- TypeScript
- (필요 시 Next.js 여부 명시)

#### 3. 수정/생성 대상 코드

- 신규 페이지
- 로그인 컴포넌트
- 인증 관련 로직

#### 4. 연관 코드

- 인증 상태를 관리하는 Context / Store
- API 통신 모듈

#### 5. 규칙 및 제약조건 (Constraints)

- XSS 방지
- 입력값 검증 필수
- 환경 변수 직접 접근 금지
- 보안 가이드 준수

👉 이 단계가 끝나면,  
**“AI에게 무엇을 맡길지”가 명확해집니다.**

---

## 2️⃣ Cursor에서 Context를 통제하는 방법

Cursor의 강점은  
**Context를 ‘눈으로 보며’ 제어할 수 있다는 점** 입니다.

### Select – 무엇을 볼 것인가

- Agent에게:
  - 어떤 파일을 참고할지
  - 어떤 폴더까지만 접근할지
- `@` 기능, Rules, MCP로 명확히 지정

예:
- “auth 관련 폴더만 참고”
- “UI 컴포넌트 디렉토리만 접근”

---

### Isolate – 무엇을 보지 말 것인가

AI에게는 “하지 말아야 할 것”을 명확히 알려줘야 합니다.

- 인프라 설정 ❌
- 배포 설정 ❌
- DB 스키마 ❌ (이번 실습 범위 아님)

👉 지금 필요한 맥락만 남기고 **격리(Isolate)** 합니다.

---

## 3️⃣ Rules로 개발 기준 고정하기

이제 Agent가 **항상 지켜야 할 규칙** 을 설정합니다.

### 이번 실습에서의 Project Rules 예시

- React + TypeScript 사용
- 모든 사용자 입력은 검증 후 처리
- `innerHTML` 사용 금지
- OAuth 로직은 컴포넌트와 분리
- 코드 생성 후 간단한 보안 리뷰 포함

이 Rules는:
- 매번 Prompt에 적지 않아도
- Agent가 **항상 전제로 삼는 기준** 이 됩니다.

👉 이 순간부터  
AI는 “아무 코드나 짜는 존재”가 아니라  
**우리 팀 기준을 따르는 개발자** 가 됩니다.

---

## 4️⃣ Agent에게 ‘일의 방식’을 전달하기

AI 주도 개발에서 중요한 것은  
**무엇을 만들지** 보다 **어떻게 일할지** 입니다.

### Workflow 예시

1. 요구사항 요약
2. 컴포넌트 구조 설계
3. 보안 포인트 체크
4. 코드 생성
5. 스스로 간단한 검토

이 Workflow를:
- Rules로 고정하거나
- Prompt로 명시하여

Agent가 **계획 → 실행 → 검토** 흐름을 따르도록 만듭니다.

---

## 5️⃣ 아직 코드는 작성하지 않는다

여기까지 왔다면,
아직 한 줄의 코드도 작성하지 않았지만  
이미 중요한 작업은 거의 끝났습니다.

- 무엇을 만들지 명확하고
- 어떤 규칙을 지켜야 하고
- 어떤 범위에서 일해야 하는지
- 어떤 방식으로 결과를 내야 하는지

👉 이제서야 **AI에게 일을 맡길 준비** 가 된 것입니다.

---

## 이 단계가 중요한 이유

많은 실무 실패 사례의 공통점은 다음과 같습니다.

- AI가 엉뚱한 파일을 수정했다
- 보안 취약점이 포함되었다
- 결과물이 매번 달라진다

이 문제의 80%는  
**코드 작성 이전의 환경 설계 부족** 에서 발생합니다.

---

### 다음 단계 예고

다음 섹션에서는 드디어:

- 이 환경 위에서
- Cursor Agent에게
- 실제로 **웹페이지 구현을 위임** 해봅니다.

그때는 더 이상
“AI에게 부탁”하는 느낌이 아니라  
**“업무를 할당”하는 경험** 을 하게 될 것입니다.

---

### 정리

- AI 주도 개발은 코드보다 환경이 먼저다
- 요구사항은 Context로 분해해야 한다
- Select / Isolate / Rules가 핵심이다
- 이 단계가 끝나야 비로소 ‘위임’이 가능하다
